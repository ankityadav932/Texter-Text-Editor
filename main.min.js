class Texter{static #a="â€‹";static #b="&#8203;";#c=!0;#d=null;#e=null;#f=null;#g=[];#h=null;#i=null;#j=null;#k=null;#l={selectionType:{emptySelection:0,singleLineSelection:1,multilineSelection:2},featureType:{inlineFeature:1,newLineFeature:2,customFeature:3,stylingFeature:4},elementType:{inline:1,block:2}};#m={p:`
			<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-paragraph" viewBox="0 0 16 16">
			  <path d="M10.5 15a.5.5 0 0 1-.5-.5V2H9v12.5a.5.5 0 0 1-1 0V9H7a4 4 0 1 1 0-8h5.5a.5.5 0 0 1 0 1H11v12.5a.5.5 0 0 1-.5.5z"/>
			</svg>
		`,h1:`
			<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-type-h1" viewBox="0 0 16 16">
			  <path d="M8.637 13V3.669H7.379V7.62H2.758V3.67H1.5V13h1.258V8.728h4.62V13h1.259zm5.329 0V3.669h-1.244L10.5 5.316v1.265l2.16-1.565h.062V13h1.244z"/>
			</svg>
		`,h2:`
			<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-type-h2" viewBox="0 0 16 16">
			  <path d="M7.638 13V3.669H6.38V7.62H1.759V3.67H.5V13h1.258V8.728h4.62V13h1.259zm3.022-6.733v-.048c0-.889.63-1.668 1.716-1.668.957 0 1.675.608 1.675 1.572 0 .855-.554 1.504-1.067 2.085l-3.513 3.999V13H15.5v-1.094h-4.245v-.075l2.481-2.844c.875-.998 1.586-1.784 1.586-2.953 0-1.463-1.155-2.556-2.919-2.556-1.941 0-2.966 1.326-2.966 2.74v.049h1.223z"/>
			</svg>
		`,h3:`
			<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-type-h3" viewBox="0 0 16 16">
			  <path d="M7.637 13V3.669H6.379V7.62H1.758V3.67H.5V13h1.258V8.728h4.62V13h1.259zm3.625-4.272h1.018c1.142 0 1.935.67 1.949 1.674.013 1.005-.78 1.737-2.01 1.73-1.08-.007-1.853-.588-1.935-1.32H9.108c.069 1.327 1.224 2.386 3.083 2.386 1.935 0 3.343-1.155 3.309-2.789-.027-1.51-1.251-2.16-2.037-2.249v-.068c.704-.123 1.764-.91 1.723-2.229-.035-1.353-1.176-2.4-2.954-2.385-1.873.006-2.857 1.162-2.898 2.358h1.196c.062-.69.711-1.299 1.696-1.299.998 0 1.695.622 1.695 1.525.007.922-.718 1.592-1.695 1.592h-.964v1.074z"/>
			</svg>
		`,boldText:`
			<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-type-bold" viewBox="0 0 16 16">
				<path d="M8.21 13c2.106 0 3.412-1.087 3.412-2.823 0-1.306-.984-2.283-2.324-2.386v-.055a2.176 2.176 0 0 0 1.852-2.14c0-1.51-1.162-2.46-3.014-2.46H3.843V13H8.21zM5.908 4.674h1.696c.963 0 1.517.451 1.517 1.244 0 .834-.629 1.32-1.73 1.32H5.908V4.673zm0 6.788V8.598h1.73c1.217 0 1.88.492 1.88 1.415 0 .943-.643 1.449-1.832 1.449H5.907z"/>
			</svg>
		`,italicText:`
			<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-type-italic" viewBox="0 0 16 16">
			  <path d="M7.991 11.674 9.53 4.455c.123-.595.246-.71 1.347-.807l.11-.52H7.211l-.11.52c1.06.096 1.128.212 1.005.807L6.57 11.674c-.123.595-.246.71-1.346.806l-.11.52h3.774l.11-.52c-1.06-.095-1.129-.211-1.006-.806z"/>
			</svg>
		`,underlinedText:`
			<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-type-underline" viewBox="0 0 16 16">
			  <path d="M5.313 3.136h-1.23V9.54c0 2.105 1.47 3.623 3.917 3.623s3.917-1.518 3.917-3.623V3.136h-1.23v6.323c0 1.49-.978 2.57-2.687 2.57-1.709 0-2.687-1.08-2.687-2.57V3.136zM12.5 15h-9v-1h9v1z"/>
			</svg>
		`,unorderedlists:`
			<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-list-task" viewBox="0 0 16 16">
			  <path fill-rule="evenodd" d="M2 2.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5V3a.5.5 0 0 0-.5-.5H2zM3 3H2v1h1V3z"/>
			  <path d="M5 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM5.5 7a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9zm0 4a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9z"/>
			  <path fill-rule="evenodd" d="M1.5 7a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5V7zM2 7h1v1H2V7zm0 3.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5H2zm1 .5H2v1h1v-1z"/>
			</svg>
		`,orderedlists:`
			<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-list-ol" viewBox="0 0 16 16">
			  <path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5z"/>
			  <path d="M1.713 11.865v-.474H2c.217 0 .363-.137.363-.317 0-.185-.158-.31-.361-.31-.223 0-.367.152-.373.31h-.59c.016-.467.373-.787.986-.787.588-.002.954.291.957.703a.595.595 0 0 1-.492.594v.033a.615.615 0 0 1 .569.631c.003.533-.502.8-1.051.8-.656 0-1-.37-1.008-.794h.582c.008.178.186.306.422.309.254 0 .424-.145.422-.35-.002-.195-.155-.348-.414-.348h-.3zm-.004-4.699h-.604v-.035c0-.408.295-.844.958-.844.583 0 .96.326.96.756 0 .389-.257.617-.476.848l-.537.572v.03h1.054V9H1.143v-.395l.957-.99c.138-.142.293-.304.293-.508 0-.18-.147-.32-.342-.32a.33.33 0 0 0-.342.338v.041zM2.564 5h-.635V2.924h-.031l-.598.42v-.567l.629-.443h.635V5z"/>
			</svg>
		`,tables:`
			<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-table" viewBox="0 0 16 16">
			  <path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 2h-4v3h4V4zm0 4h-4v3h4V8zm0 4h-4v3h3a1 1 0 0 0 1-1v-2zm-5 3v-3H6v3h4zm-5 0v-3H1v2a1 1 0 0 0 1 1h3zm-4-4h4V8H1v3zm0-4h4V4H1v3zm5-3v3h4V4H6zm4 4H6v3h4V8z"/>
			</svg>
		`,image:`
			<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-image" viewBox="0 0 16 16">
			  <path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
			  <path d="M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1h12z"/>
			</svg>
		`,alignLeft:`
			<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-text-left" viewBox="0 0 16 16">
			  <path fill-rule="evenodd" d="M2 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"/>
			</svg>
		`,alignRight:`
			<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-text-right" viewBox="0 0 16 16">
			  <path fill-rule="evenodd" d="M6 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-4-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm4-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-4-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"/>
			</svg>
		`,alignCenter:`
			<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-text-center" viewBox="0 0 16 16">
			  <path fill-rule="evenodd" d="M4 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"/>
			</svg>
		`,close:`
			<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle" viewBox="0 0 16 16">
			  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
			  <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
			</svg>
		`,add:`
			<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle-fill" viewBox="0 0 16 16">
			  <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z"/>
			</svg>
		`};#n={p:{name:"P",class:"p-btn",type:this.#l.featureType.newLineFeature,content:this.#m.p,tooltip:"Paragraph"},h1:{name:"H1",class:"h1-btn",type:this.#l.featureType.newLineFeature,content:this.#m.h1,tooltip:"Big heading"},h2:{name:"H2",class:"h2-btn",type:this.#l.featureType.newLineFeature,content:this.#m.h2,tooltip:"Medium heading"},h3:{name:"H3",class:"h3-btn",type:this.#l.featureType.newLineFeature,content:this.#m.h3,tooltip:"Small heading"},D1:"divider",boldText:{name:"STRONG",class:"boldText-btn",type:this.#l.featureType.inlineFeature,content:this.#m.boldText,tooltip:"Bold text"},italicText:{name:"I",class:"italicText-btn",type:this.#l.featureType.inlineFeature,content:this.#m.italicText,tooltip:"Italic text"},underlinedText:{name:"U",class:"underlinedText-btn",type:this.#l.featureType.inlineFeature,content:this.#m.underlinedText,tooltip:"Underlined text"},D2:"divider",unorderedlists:{name:"UL",class:"unorderedlists-btn",type:this.#l.featureType.newLineFeature,content:this.#m.unorderedlists,tooltip:"Bullet list"},orderedlists:{name:"OL",class:"orderedlists-btn",type:this.#l.featureType.newLineFeature,content:this.#m.orderedlists,tooltip:"Numbered list"},D3:"divider",alignLeft:{name:"ALIGN-LEFT",styleCategory:"ALIGNMENT",class:"align-left-btn",type:this.#l.featureType.stylingFeature,styleClass:"align-left",content:this.#m.alignLeft,tooltip:"Align Left",level:this.#l.elementType.block},alignCenter:{name:"ALIGN-CENTER",styleCategory:"ALIGNMENT",class:"align-center-btn",type:this.#l.featureType.stylingFeature,styleClass:"align-center",content:this.#m.alignCenter,tooltip:"Align Center",level:this.#l.elementType.block},alignright:{name:"ALIGN-RIGHT",styleCategory:"ALIGNMENT",class:"align-right-btn",type:this.#l.featureType.stylingFeature,styleClass:"align-right",content:this.#m.alignRight,tooltip:"Align Right",level:this.#l.elementType.block},D4:"divider",tables:{name:"TABLE",class:"tables-btn",type:this.#l.featureType.customFeature,content:this.#m.tables,tooltip:"Table"},image:{name:"IMG",class:"image-btn",type:this.#l.featureType.customFeature,content:this.#m.image,tooltip:"Image"}};constructor(e){this.userConfig=e,this.createTextEditor()}getLastRange=()=>{if(!this.#k)return null;let e=document.createRange();return e.setStart(this.#k.startContainer,this.#k.startOffset),e.setEnd(this.#k.endContainer,this.#k.endOffset),this.#k.collapsed&&e.collapse(!0),e};clearLastSelection=()=>{window.getSelection().removeAllRanges(),this.#k=null};createTextEditor=()=>{this.#d=document.createElement("div"),this.#d.classList.add("texter"),this.#d.classList.add(this.userConfig.config.customClass),this.#d.style.width=this.userConfig.config.width,this.#e=document.createElement("div"),this.#e.classList.add("texter-option-menu");let e=document.createElement("div");e.classList.add("overflow-scroll");let t=document.createElement("div");for(let i in t.classList.add("menu-panel"),this.#n){if("divider"==this.#n[i]){let n=document.createElement("span");n.classList.add("menu-divider"),t.appendChild(n);continue}let r=document.createElement("span");r.classList.add("first-level-item"),r.classList.add(this.#n[i].class),r.setAttribute("type","button"),r.setAttribute("feature-key",i),r.setAttribute("title",this.#n[i].tooltip),r.innerHTML=this.#n[i].content,t.appendChild(r)}e.appendChild(t),this.#e.appendChild(e),this.#f=document.createElement("div"),this.#f.classList.add("texter-text-editor"),this.#f.setAttribute("contenteditable","true"),this.#f.setAttribute("autofocus","true"),this.#f.style.height=this.userConfig.config.height,this.#d.appendChild(this.#e),this.#d.appendChild(this.#f),this.userConfig.element.insertAdjacentElement("afterend",this.#d),this.addTexterListeners()};addTexterListeners=()=>{document.querySelectorAll(".first-level-item svg").forEach(e=>{e.setAttribute("width","25"),e.setAttribute("height","25")}),document.execCommand("defaultParagraphSeparator",!1,"p"),this.#d.addEventListener("mouseup",e=>{if(this.manageCustomFeatureOptions(e.target),this.manageMenuOptions(e.target),this.#f.contains(e.target)){this.setParagraphAsDefault(e);let t=window.getSelection();if(0==t.rangeCount)return;let i=t.getRangeAt(0);(this.#f==i.commonAncestorContainer||this.#f.contains(i.commonAncestorContainer))&&(this.#k={startContainer:i.startContainer,endContainer:i.endContainer,startOffset:i.startOffset,endOffset:i.endOffset,collapsed:i.collapsed},this.setActiveFeatures())}this.#e.contains(e.target)&&this.#e.querySelectorAll("span.first-level-item").forEach(t=>{(t==e.target||t.contains(e.target))&&this.changeFeatureState(t.getAttribute("feature-key"))})});["keyup","focusin"].forEach(e=>{this.#f.addEventListener(e,e=>{this.setParagraphAsDefault(e);let t=window.getSelection();if(0==t.rangeCount)return;let i=t.getRangeAt(0);(this.#f==i.commonAncestorContainer||this.#f.contains(i.commonAncestorContainer))&&(this.#k={startContainer:i.startContainer,endContainer:i.endContainer,startOffset:i.startOffset,endOffset:i.endOffset,collapsed:i.collapsed},this.setActiveFeatures())})}),this.#f.addEventListener("focusout",e=>{console.log("OK")})};createImageOptions=e=>{if(e.parentElement.querySelector("span.image-options"))return;let t=document.createElement("SPAN");t.contentEditable=!1,t.classList.add("image-options");let i=document.createElement("SPAN");i.classList.add("custom-feature-divider");let n=document.createElement("BUTTON");n.innerHTML=this.#m.alignLeft,n.setAttribute("feature","img-left"),n.setAttribute("title","Algin left"),t.appendChild(n);let r=document.createElement("BUTTON");r.innerHTML=this.#m.alignCenter,r.setAttribute("feature","img-center"),r.setAttribute("title","Align center"),t.appendChild(r);let l=document.createElement("BUTTON");l.innerHTML=this.#m.alignRight,l.setAttribute("feature","img-right"),l.setAttribute("title","Align right"),t.appendChild(l),t.appendChild(i.cloneNode(!0));let a=document.createElement("BUTTON");a.innerText="100%",a.setAttribute("feature","img-full"),a.setAttribute("title","Full size image"),t.appendChild(a);let s=document.createElement("BUTTON");s.innerText="50%",s.setAttribute("feature","img-half"),s.setAttribute("title","Half size image"),t.appendChild(s);let o=document.createElement("BUTTON");o.innerText="25%",o.setAttribute("feature","img-quarter"),o.setAttribute("title","Qauter size image"),t.appendChild(o),t.appendChild(i.cloneNode(!0));let d=document.createElement("BUTTON");d.innerHTML=this.#m.close,d.setAttribute("feature","img-close"),d.setAttribute("title","Remove image"),t.appendChild(d),e.insertAdjacentElement("afterend",t),this.addImageOptionListener(e,t)};addImageOptionListener=(e,t)=>{let i=this.mainElement(e,this.#l.elementType.block),n=e.parentElement,r=t.querySelectorAll("button");console.log(r);let l=e=>{["align-left","align-center","align-right"].forEach(e=>{i.classList.contains(e)&&i.classList.remove(e)}),i.classList.add(e),i.click()},a=t=>{["full","half","quarter"].forEach(e=>{n.classList.contains(e)&&n.classList.remove(e)}),n.classList.add(t),e.click()};r.forEach(e=>{let t=e.getAttribute("feature");if(t)switch(t){case"img-left":e.addEventListener("mouseup",e=>l("align-left"));break;case"img-center":e.addEventListener("mouseup",e=>l("align-center"));break;case"img-right":e.addEventListener("mouseup",e=>l("align-right"));break;case"img-full":e.addEventListener("mouseup",e=>a("full"));break;case"img-half":e.addEventListener("mouseup",e=>a("half"));break;case"img-quarter":e.addEventListener("mouseup",e=>a("quarter"));break;case"img-close":e.addEventListener("mouseup",e=>{n.parentElement.removeChild(n),i.removeAttribute("class"),i.properText().length||i.parentElement.removeChild(i)});break;default:console.error("Unknown Image option passed for adding event listener")}})};manageCustomFeatureOptions=e=>{if(this.#j&&this.#j!=e&&!this.#j.contains(e)){switch(this.#i){case"IMG":for(;this.#j.nextSibling;)this.#j.parentElement.removeChild(this.#j.nextSibling);for(;this.#j.previousSibling;)this.#j.parentElement.removeChild(this.#j.previousSibling);break;case"TABLE":"SPAN"==this.#j.lastChild.nodeName&&this.#j.removeChild(this.#j.lastChild);break;default:console.error("Unknown custom feature passed for deactivation")}this.#j=null,this.#i=null}};manageMenuOptions=e=>{let t=document.querySelector("#item-sub-menu");t&&!(e==t||t.contains(e))&&t.parentElement.removeChild(t)};getElementType=e=>e?1!=e.nodeType?console.error("Only HTML node will be accepted as parameter"):(0,(e.currentStyle||window.getComputedStyle(e,"")).display):void 0;getElementPosition=e=>{let t=e.getBoundingClientRect(),i=e.offsetParent,n=i.getBoundingClientRect(),r=Math.abs(t.top-n.top);return{left:Math.abs(t.left-n.left)+window.scrollX,top:r+window.scrollY}};setParagraphAsDefault=e=>{let t=window.getSelection();if(0!=t.rangeCount&&(t.getRangeAt(0),0==this.#f.properText().length&&0==this.#f.childNodes.length)){let i=document.createElement("p");i.appendChild(document.createElement("br")),this.#f.appendChild(i);let n=document.createRange();n.setStart(i.firstChild,0),n.collapse(!0),t.removeAllRanges(),t.addRange(n)}};unNestElements=(e,t,i,n)=>{if(3!=e.nodeType)return console.error("Non text node has been passed for un-nesting");let r=document.createTextNode(e.nodeValue.slice(0,t)),l=document.createTextNode(e.nodeValue.slice(t)),a=[],s=[],o=[],d=e;for(;d=d.previousSibling;)s.unshift(d);for(d=e;d=d.nextSibling;)o.push(d);e.parentElement.setAttribute("target-node","true");let h=e.parentElement;if(a.push(h.nodeName.toUpperCase()),i)for(;h.nodeName!=i;)a.push((h=h.parentElement).nodeName.toUpperCase());else if(!n)return console.error("Either tagName or targetElement is required for un-nesting HTML elements");else for(;h!=n;)a.push((h=h.parentElement).nodeName.toUpperCase());let c=h.cloneNode(!0),p=h.cloneNode(!0),m=c.hasAttribute("target-node")?c:c.querySelector("[target-node]");for(;m.firstChild;)m.removeChild(m.firstChild);for(d of s)m.appendChild(d);for(m.appendChild(r),m.removeAttribute("target-node");m!=c;){for(;m.nextSibling;)m.parentElement.removeChild(m.nextSibling);m=m.parentElement}for(m=p.hasAttribute("target-node")?p:p.querySelector("[target-node]");m.firstChild;)m.removeChild(m.firstChild);for(d of(m.appendChild(l),o))m.appendChild(d);for(m.removeAttribute("target-node");m!=p;){for(;m.previousSibling;)m.parentElement.removeChild(m.previousSibling);m=m.parentElement}let f=document.createTextNode(Texter.#a),$=h.parentElement;return p.properText()&&p.properText().length?($.replaceChild(p,h),$.insertBefore(f,p)):$.replaceChild(f,h),c.properText()&&c.properText().length&&$.insertBefore(c,f),{focusNode:f,nodeArray:a}};removeDuplicateTags=(e,t={})=>{if(1==e.nodeType){let i=e.nodeName;if(i in t?t[i]++:t[i]=1,e.childNodes.length)for(let n of e.childNodes)this.removeDuplicateTags(n,t);if(i in t&&t[i]>1){let r=e.parentElement;for(;e.firstChild;)r.insertBefore(e.firstChild,e);r.removeChild(e)}t[i]--}};insertInlineTag=e=>{let t=this.getLastRange();if(!t)return!1;if(t.collapsed){let i=document.createElement(e),n=t.startContainer,r=1==n.nodeType?n:n.parentElement;if(this.mainElement(r,this.#l.elementType.block),i.appendChild(document.createTextNode(Texter.#a)),3==n.nodeType){if(n.properText().length){let l=document.createTextNode(n.nodeValue.slice(0,t.startOffset)),a=document.createTextNode(n.nodeValue.slice(t.startOffset));r.insertBefore(l,n),n.nextSibling?r.insertBefore(a,n.nextSibling):r.appendChild(a)}r.replaceChild(i,n)}else if(1==n.nodeType){if("BR"==n.nodeName){let s=n;(n=n.parentElement).removeChild(s)}n.childNodes.length?n.insertBefore(i,n.firstChild):n.appendChild(i)}else console.error("Unknown element in range");this.setCaretPosition(i.firstChild,1),this.setActiveFeatures()}else if(t.startContainer==t.endContainer){let o=document.createElement(e),d=t.startContainer,h=d.parentElement,c=document.createTextNode(d.nodeValue.slice(0,t.startOffset)),p=document.createTextNode(d.nodeValue.slice(t.startOffset,t.endOffset)),m=document.createTextNode(d.nodeValue.slice(t.endOffset));o.appendChild(p),h.insertBefore(c,d),d.nextSibling?h.insertBefore(m,d.nextSibling):h.appendChild(m),h.replaceChild(o,d)}else{let f=t.commonAncestorContainer,$=t.startContainer,u=t.startOffset,_=$.parentElement,g=document.createTextNode($.nodeValue.slice(0,u)),C=document.createTextNode($.nodeValue.slice(u)),E=document.createElement(e),v=E;if(E.appendChild(C),_.replaceChild(E,$),_.insertBefore(g,E),(_=E)!=f)for(;_.parentElement!=f;){let x=_.parentElement;for(E=document.createElement(e),_=_.nextSibling;_;){let b=_;_=_.nextSibling,b.properText()&&b.properText().length?E.appendChild(b):b.parentElement.removeChild(b)}E.properText()&&E.properText().length&&x.appendChild(E),_=x}let T=_;if($=t.endContainer,u=t.endOffset,_=$.parentElement,g=document.createTextNode($.nodeValue.slice(0,u)),C=document.createTextNode($.nodeValue.slice(u)),(E=document.createElement(e)).appendChild(g),_.replaceChild(C,$),_.insertBefore(E,C),(_=E)!=f)for(;_.parentElement!=f;){let y=_.parentElement;for(E=document.createElement(e),_=_.previousSibling;_;){let N=_;_=_.previousSibling,N.properText()&&N.properText().length?E.appendChild(N):N.parentElement.removeChild(N)}E.properText()&&E.properText().length&&y.insertBefore(E,y.firstChild),_=y}let L=_;if(T!=f&&L!=f)for(_=T.nextSibling;_&&_!=L;){let w=_;if(_=_.nextSibling,1==w.nodeType){let A=this.getElementType(w);if(E=document.createElement(e),"block"==A){for(;w.firstChild;)E.appendChild(w.firstChild);w.appendChild(E)}else if("inline"==A){let S=w.parentElement;E.appendChild(w.cloneNode(!0)),S.replaceChild(E,w)}else console.error("DOM element display type is out of config - "+A)}else if(3==w.nodeType){if(w&&w.properText().length){let F=w.parentElement;(E=document.createElement(e)).appendChild(w.cloneNode(!0)),F.replaceChild(E,w)}}else console.error("DOM node type is out of config - "+w.nodeType)}this.setCaretPosition(v.firstChild,0)}};mainElement=(e,t)=>{let i=this.#f,n=3==e.nodeType?e.parentElement:e;if(t==this.#l.elementType.block)for(;n;){let r=this.getElementType(n);if(n==i)return console.error("No block ancestor element found. Please report this issue"),null;if("inline"!=r&&n.parentElement==i)return n;n=n.parentElement}else if(t!=this.#l.elementType.inline)return console.error("Exceptional value sent in type argument"),!1;else for(;n;){let l=this.getElementType(n),a=this.getElementType(n.parentElement);if(n==i)return console.error("No block ancestor element found. Please report this issue"),null;if("inline"==l&&"inline"!=a)return n;n=n.parentElement}};setCaretPosition=(e,t)=>{let i=document.createRange(),n=window.getSelection();i.setStart(e,t),i.collapse(!0),this.#k={startContainer:i.startContainer,endContainer:i.endContainer,startOffset:i.startOffset,endOffset:i.endOffset,collapsed:i.collapsed},n.removeAllRanges(),n.addRange(i)};generateString=()=>{let e="ID",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=t.length;for(let n=0;n<10;n++)e+=t.charAt(Math.floor(Math.random()*i));return e};nodeTreeTagRemover=(e,t)=>{if(1==e.nodeType){if(e.childNodes.length){let i=e.firstChild;for(;i;){let n=i;i=i.nextSibling,this.nodeTreeTagRemover(n,t)}}if(e.nodeName,!(e.properText()&&e.properText().length)){e.parentElement.removeChild(e);return}if(t==e.nodeName){let r=e.parentElement;for(;e.firstChild;)r.insertBefore(e.firstChild,e);r.removeChild(e)}}};removeInlineTag=e=>{let t=this.getLastRange();if(t.collapsed){let i=t.startContainer,n=t.startOffset,r=this.unNestElements(i,n,e,null),l=r.focusNode,a=l.parentElement,s=l.nextSibling,o=l;for(let d of this.#g)if(d.featureType==this.#l.featureType.inlineFeature&&d.nodeName!=e&&r.nodeArray.includes(d.nodeName.toUpperCase())){let h=document.createElement(d.nodeName);h.appendChild(o),o=h}s?a.insertBefore(o,s):a.appendChild(o),this.setCaretPosition(l,1),this.setActiveFeatures()}else if(t.startContainer==t.endContainer)console.log("Same element tag removal - To be developed");else{let c=t.commonAncestorContainer,p=this.getElementType(c),m=t.startContainer,f=document.createElement("SPAN"),$=t.startOffset,u=t.endContainer,_=document.createElement("SPAN"),g=t.endOffset;f.setAttribute("id","begin-node"),_.setAttribute("id","end-node"),f.appendChild(m.cloneNode(!0)),_.appendChild(u.cloneNode(!0)),m.parentElement.replaceChild(f,m),u.parentElement.replaceChild(_,u),m=(f=this.#f.querySelector("#begin-node")).firstChild,f.parentElement.replaceChild(m,f);let C=null;if("inline"==this.getElementType(m.parentElement)){let E=this.mainElement(m,this.#l.elementType.inline);C=this.unNestElements(m,$,null,E).focusNode}else C=m;if("inline"!=p)for(;C&&C.parentElement!=c;){let v=C;for(C=C.parentElement,v=v.nextSibling;v;){let x=v;v=v.nextSibling,1==x.nodeType&&this.nodeTreeTagRemover(x,e)}}u=(_=this.#f.querySelector("#end-node")).firstChild,_.parentElement.replaceChild(u,_);let b=null;if("inline"==this.getElementType(u.parentElement)){let T=this.mainElement(u,this.#l.elementType.inline);b=this.unNestElements(u,g,null,T).focusNode}else b=u;if("inline"!=p)for(;b.parentElement!=c;){let y=b;for(b=b.parentElement,y=y.previousSibling;y;){let N=y;y=y.previousSibling,1==N.nodeType&&this.nodeTreeTagRemover(N,e)}}console.dir(C),console.dir(b);let L=C.nextSibling;if(L&&L!=b)for(;L&&L!=b;){let w=L;L=L.nextSibling,1==w.nodeType&&this.nodeTreeTagRemover(w,e)}}};activateNewLineFeature=e=>{let t=this.getLastRange(),i=e.name,n=["UL","OL"],r=["H1","H2","H3","P"];if(t.collapsed){let l=this.mainElement(t.startContainer,this.#l.elementType.block);if(n.includes(i)){let a=document.createElement(i);if(n.includes(l.nodeName)){for(;l.firstChild;)a.appendChild(l.firstChild);l.parentElement.replaceChild(a,l),this.setCaretPosition(a.lastChild,0)}else if(r.includes(l.nodeName)){let s=document.createElement("LI");for(;l.firstChild;)s.appendChild(l.firstChild);a.appendChild(s),l.parentElement.replaceChild(a,l),this.setCaretPosition(s,0)}else console.log("New feature cant be implemented on custom feature")}else if(r.includes(i)){if(n.includes(l.nodeName)){let o=l.nodeName,d=t.startContainer;for(;"LI"!=d.nodeName.toUpperCase();)d=d.parentElement;let h=document.createElement(i);for(;d.firstChild;)h.appendChild(d.firstChild);let c=document.createElement(o);for(;d.previousSibling;)c.childNodes.length?c.insertBefore(d.previousSibling,c.firstChild):c.appendChild(d.previousSibling);let p=document.createElement(o);for(;d.nextSibling;)p.appendChild(d.nextSibling);p.childNodes.length?(l.parentElement.replaceChild(p,l),p.parentElement.insertBefore(h,p)):l.parentElement.replaceChild(h,l),c.childNodes.length&&h.parentElement.insertBefore(c,h),this.setCaretPosition(h,0)}else if(r.includes(l.nodeName)){let m=document.createElement(i);for(;l.firstChild;)m.appendChild(l.firstChild);l.parentElement.replaceChild(m,l),this.setCaretPosition(m,0)}else console.log("New feature cant be implemented on custom feature")}else console.log("New feature cant be implemented on custom feature")}else{let f=t.startContainer,$=t.endContainer,u=this.mainElement(f,this.#l.elementType.block),_=this.mainElement($,this.#l.elementType.block);if(!(n.includes(u.nodeName)||r.includes(u.nodeName))||!(n.includes(_.nodeName)||r.includes(_.nodeName)))return console.log("New feature cant be implemented on custom feature");if(n.includes(u.nodeName)){let g=f;for(;"LI"!=g.nodeName.toUpperCase();)g=g.parentElement;let C=document.createElement(u.nodeName);for(;g.previousSibling;)C.childNodes.length?C.appendChild(g.previousSibling):C.insertBefore(g.previousSibling,C.firstChild);u.parentElement.insertBefore(C,u)}if(n.includes(_.nodeName)){let E=$;for(;"LI"!=E.nodeName.toUpperCase();)E=E.parentElement;let v=document.createElement(u.nodeName);for(;E.nextSibling;)v.appendChild(E.nextSibling);_.nextSibling?_.parentElement.insertBefore(v,_.nextSibling):_.appendChild(v)}if(n.includes(i)){let x=u,b=document.createElement(i);for(;;){let T=x;if(x=x.nextSibling?x.nextSibling:x,n.includes(T.nodeName)){for(;T.firstChild;)b.appendChild(T.firstChild);T!=_&&T.parentElement.removeChild(T)}else if(r.includes(T.nodeName)){let y=document.createElement("LI");for(;T.firstChild;)y.appendChild(T.firstChild);b.appendChild(y),T!=_&&T.parentElement.removeChild(T)}else{b.childNodes.length&&T.parentElement.insertBefore(b,T),b=document.createElement(i);continue}if(T==_){T.parentElement.insertBefore(b,T),T.parentElement.removeChild(T);break}}}else if(r.includes(i)){let N=u;for(;;){let L=N;if(N=N.nextSibling?N.nextSibling:N,n.includes(L.nodeName)){for(;L.firstChild;){let w=L.firstChild,A=document.createElement(i);for(;w.firstChild;)A.appendChild(w.firstChild);L.parentElement.insertBefore(A,L),L.removeChild(w)}L.parentElement.removeChild(L)}else{if(!r.includes(L.nodeName))continue;let S=document.createElement(i);for(;L.firstChild;)S.appendChild(L.firstChild);L.parentElement.replaceChild(S,L)}if(L==_)break}}else console.log("New feature cant be implemented on custom feature")}};insertImage=()=>{let e=document.createElement("INPUT");e.type="file",e.click(),e.addEventListener("change",e=>{if(!(e.target.files&&1==e.target.files.length))return console.log("No file selected");let t=e.target.files[0];if(t){let i=new FileReader;i.addEventListener("load",e=>{let t=e.target.result,i=this.getLastRange(),n=document.createElement("IMG");n.src=t;let r=document.createElement("SPAN");r.contentEditable=!1,r.classList.add("image-container"),r.appendChild(n);let l=document.createElement("div");(l.contentEditable=!1,l.appendChild(r),i)?this.mainElement(i.endContainer,this.#l.elementType.block).insertAdjacentElement("afterend",l):this.#f.appendChild(l);let a=document.createElement("p");a.appendChild(document.createElement("br")),l.insertAdjacentElement("afterend",a),n.addEventListener("click",e=>{this.createImageOptions(e.target),this.clearLastSelection(),this.setActiveFeatures(),this.#j=e.target,this.#i=e.target.nodeName})}),i.readAsDataURL(t)}})};openMenuOptions=(e,t=0,i=0)=>{if(!e.classList.contains("first-level-item"))return null;{let n=this.getElementPosition(e),r=document.createElement("span");return r.classList.add("hide"),r.id="item-sub-menu",r.style.left=n.left+i+"px",r.style.top=n.top+t+"px",this.#e.appendChild(r),r}};addTableOptionHandlers=(e,t)=>{let i=t.querySelectorAll("button"),n=t=>{let i=this.getLastRange();["align-left","align-center","align-right"].forEach(t=>{e.classList.contains(t)&&e.classList.remove(t)}),e.classList.add(t),this.setCaretPosition(i.startContainer,i.startOffset)},r=(t=!1)=>{let i=this.getLastRange();if(t)switch(t){case"row":e.classList.contains("header-row")||e.classList.add("header-row");break;case"col":e.classList.contains("header-col")||e.classList.add("header-col")}else e.classList.remove("header-col"),e.classList.remove("header-row");this.setCaretPosition(i.startContainer,i.startOffset)},l=()=>{let t=this.getLastRange(),i=e.querySelectorAll("tr"),n=document.createElement("td");i.forEach(e=>{e.appendChild(n.cloneNode(!0))}),this.setCaretPosition(t.startContainer,t.startOffset)},a=()=>{let t=this.getLastRange(),i=e.querySelector("tr"),n=i.childNodes.length,r=document.createElement("td");i=document.createElement("tr");for(var l=0;l<n;l++)i.appendChild(r.cloneNode());"SPAN"==e.lastChild.nodeName?e.insertBefore(i,e.lastChild):e.appendChild(i),this.setCaretPosition(t.startContainer,t.startOffset)};i.forEach(t=>{switch(t.getAttribute("feature")){case"table-left":t.addEventListener("click",e=>n("align-left"));break;case"table-center":t.addEventListener("click",e=>n("align-center"));break;case"table-right":t.addEventListener("click",e=>n("align-right"));break;case"table-add-col":t.addEventListener("click",e=>l());break;case"table-add-row":t.addEventListener("click",e=>a());break;case"table-header-row":t.addEventListener("click",e=>r("row"));break;case"table-header-col":t.addEventListener("click",e=>r("col"));break;case"table-header-remove":t.addEventListener("click",e=>r());break;case"table-close":t.addEventListener("click",t=>{let i=e.previousElementSibling;e.parentElement.removeChild(e),this.setCaretPosition(i,0)});break;default:console.log("Unknow table feature passed")}})};createTableOptions=e=>{let t=e;for(;"TABLE"!=t.nodeName;)t=t.parentElement;if(t.querySelector("span.table-options"))return;this.getElementPosition(t);let i=document.createElement("span");i.contentEditable=!1,i.classList.add("table-options"),t.appendChild(i);let n=document.createElement("SPAN");n.classList.add("custom-feature-divider");let r=document.createElement("BUTTON");r.innerHTML=this.#m.alignLeft,r.setAttribute("feature","table-left"),r.setAttribute("title","Algin left"),i.appendChild(r);let l=document.createElement("BUTTON");l.innerHTML=this.#m.alignCenter,l.setAttribute("feature","table-center"),l.setAttribute("title","Align center"),i.appendChild(l);let a=document.createElement("BUTTON");a.innerHTML=this.#m.alignRight,a.setAttribute("feature","table-right"),a.setAttribute("title","Align right"),i.appendChild(a),i.appendChild(n.cloneNode(!0));let s=document.createElement("BUTTON");s.innerHTML=this.#m.add+" Column",s.setAttribute("feature","table-add-col"),s.setAttribute("title","Add column to table"),i.appendChild(s);let o=document.createElement("BUTTON");o.innerHTML=this.#m.add+" Row",o.setAttribute("feature","table-add-row"),o.setAttribute("title","Add row to table"),i.appendChild(o),i.appendChild(n.cloneNode(!0));let d=document.createElement("BUTTON");d.innerHTML="Header Row",d.setAttribute("feature","table-header-row"),d.setAttribute("title","Add header row to table"),i.appendChild(d);let h=document.createElement("BUTTON");h.innerHTML="Header Column",h.setAttribute("feature","table-header-col"),h.setAttribute("title","Add header column to table"),i.appendChild(h);let c=document.createElement("BUTTON");c.innerHTML="Remove Header",c.setAttribute("feature","table-header-remove"),c.setAttribute("title","Remove table headers"),i.appendChild(c),i.appendChild(n.cloneNode(!0));let p=document.createElement("BUTTON");p.innerHTML=this.#m.close,p.setAttribute("feature","table-close"),p.setAttribute("title","Remove table"),i.appendChild(p),this.addTableOptionHandlers(t,i)};openNewTableOptions=()=>{let e=this.#e.querySelector(".first-level-item.tables-btn"),t=this.openMenuOptions(e,40),i=8,n=document.createElement("table");n.classList.add("demo-table");for(let r=0;r<i;r++){let l=document.createElement("tr");for(let a=0;a<i;a++)l.appendChild(document.createElement("td"));n.appendChild(l)}t.appendChild(n),t.classList.remove("hide");n.querySelectorAll("td").forEach(e=>{e.addEventListener("mouseover",t=>{let r=e.parentElement,l=r.childNodes.indexOf(e),a=r.parentElement.childNodes.indexOf(r);for(let s=0;s<i;s++)for(let o=0;o<i;o++){let d=n.childNodes[s].childNodes[o];s<=a&&o<=l?d.classList.add("selected"):d.classList.contains("selected")&&d.classList.remove("selected")}}),e.addEventListener("click",i=>{let n=e.parentElement,r=n.childNodes.indexOf(e),l=n.parentElement.childNodes.indexOf(n),a=this.getLastRange();l++,r++;let s=document.createElement("table");s.classList.add("bordered");for(let o=0;o<l;o++){let d=document.createElement("tr");for(let h=0;h<r;h++){let c=document.createElement("td");d.appendChild(c)}s.appendChild(d)}let p=a.endContainer;this.mainElement(p,this.#l.elementType.block).insertAdjacentElement("afterend",s),s.querySelectorAll("td, th").forEach(e=>{e.addEventListener("click",e=>{this.createTableOptions(e.target),this.#j=s,this.#i="TABLE"})}),t.parentElement.removeChild(t)})})};applyStyleToElement=(e,t)=>{if(e.type==this.#l.featureType.stylingFeature){let i=[];for(let n in this.#n)this.#n[n].styleCategory==e.styleCategory&&i.push(this.#n[n].styleClass);"ALIGNMENT"===e.styleCategory&&(i.forEach(e=>{t.classList.contains(e)&&t.classList.remove(e)}),t.classList.add(e.styleClass))}};applyStyles=e=>{let t=this.getLastRange();if(t.collapsed){if(e.level==this.#l.elementType.block){let i=t.startContainer,n=t.startOffset,r=this.mainElement(i,this.#l.elementType.block);r&&(this.applyStyleToElement(e,r),this.setCaretPosition(i,n))}}else if(e.level==this.#l.elementType.block){let l=t.startContainer;t.startOffset,l=this.mainElement(l,this.#l.elementType.block),this.applyStyleToElement(e,l);let a=t.endContainer;if(t.endOffset,a=this.mainElement(a,this.#l.elementType.block),this.applyStyleToElement(e,a),l!=a){let s=l.nextSibling;for(;s!=a;)s=this.mainElement(s,this.#l.elementType.block),this.applyStyleToElement(e,s),s=s.nextSibling}this.setCaretPosition(l,0)}};changeFeatureState=e=>{let t=null;if(!this.#k)return console.error("Editor was not in focus. No selection found");for(let i of this.#g)if(i.featureName==e){t=i;break}t?this.deActivateFeature(this.#n[e]):this.activateFeature(this.#n[e])};activateFeature=e=>{switch(console.log("Feature activated"),e.type){case this.#l.featureType.inlineFeature:this.insertInlineTag(e.name);break;case this.#l.featureType.newLineFeature:this.activateNewLineFeature(e);break;case this.#l.featureType.customFeature:switch(e.name){case"IMG":this.insertImage();break;case"TABLE":this.openNewTableOptions();break;default:console.error("Unknown custom feature is requested for activation")}break;case this.#l.featureType.stylingFeature:e.level==this.#l.elementType.block?this.applyStyles(e):console.log("Only block level styles are developed till now");break;default:console.error("Unknown feature type")}};deActivateFeature=e=>{switch(console.log("Feature deactivated"),e.type){case this.#l.featureType.inlineFeature:this.removeInlineTag(e.name);break;case this.#l.featureType.newLineFeature:console.log("New Line feature cannot be disabled. It can be toggled with another new line feature");break;case this.#l.featureType.customFeature:case this.#l.featureType.stylingFeature:console.log("Custom Feature cannot be deactivated by menu. It has deactivation option within itself");break;default:console.error("Unknown feature type")}};setActiveFeatures=()=>{let e=this.getLastRange();if(this.#g=[],this.#e.querySelectorAll(".first-level-item").forEach(e=>e.classList.remove("active")),!e)return console.log("Editor not in focus");if(e.collapsed){let t=e.startContainer;if(t instanceof Node==!1)return;for(;t!=this.#f;)1==t.nodeType&&this.setActiceFeatureByElement(t),t=t.parentElement}else{let i=e.cloneContents();this.#g=[];let n=e.startContainer.parentElement,r=this.mainElement(n,this.#l.elementType.block);if(n instanceof Node==!1)return;for(;n!=r;)1==n.nodeType&&this.setActiceFeatureByElement(n),n=n.parentElement;if(n=e.endContainer.parentElement,r=this.mainElement(n,this.#l.elementType.block),n instanceof Node==!1)return;for(;n!=r;)1==n.nodeType&&this.setActiceFeatureByElement(n),n=n.parentElement;if(n=null,i.childNodes&&i.childNodes.length)for(n of i.childNodes)this.nodeTreeTagChecker(n)}};setActiceFeatureByElement=e=>{if(1!=e.nodeType)return console.error("Only HTML node will be accepted as paramter");for(let t in this.getLastRange(),this.#n){let i=this.#n[t];if("object"==typeof i&&i.type){let n=i.type;switch(n){case this.#l.featureType.inlineFeature:case this.#l.featureType.newLineFeature:if(i&&i.name==e.nodeName&&!this.#g.find(t=>t.nodeName==e.nodeName)){this.#g.push({featureName:t,nodeName:e.nodeName,featureType:i.type});let r=this.#e.querySelector(`.${i.class}`);r.classList.contains("active")||r.classList.add("active")}break;case this.#l.featureType.stylingFeature:let l=this.getElementType(e);if(i.level==this.#l.elementType.block&&"inline"!=l&&e.classList.contains(i.styleClass)&&!this.#g.find(e=>e.nodeName==i.name)){this.#g.push({featureName:t,nodeName:i.name,featureType:i.type});let a=this.#e.querySelector(`.${i.class}`);a.classList.contains("active")||a.classList.add("active")}}}}};nodeTreeTagChecker=e=>{if(1==e.nodeType){for(let t in this.#n){let i=this.#n[t];i&&i.name==e.nodeName&&!this.#g.find(t=>t.nodeName==e.nodeName)&&(this.#g.push({featureName:t,nodeName:e.nodeName,featureType:i.type}),this.#e.querySelector(`.${t}-btn`).classList.add("active"))}if(e.childNodes.length)for(let n of e.childNodes)1==n.nodeType&&this.nodeTreeTagChecker(n)}}}HTMLElement.prototype.texter=function(e){let t={element:this,config:e};return"TEXTAREA"!==t.element.nodeName?console.error("Texter : Given element is not an textarea"):(t.element.style.display="none",window.texter=new Texter(t),!0)},Node.prototype.properText=function(){let e=this.textContent.trim();return e.length&&(e=(e=(e=e.replace(/\n/g,"")).replace(/\t/g,"")).replace(/\u200b/g,"")),e},NodeList.prototype.indexOf=Array.prototype.indexOf;let testHTML=`
<p>alsdkjasljdlajdlasjdljasldjaslj</p>
`;